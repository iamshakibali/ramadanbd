<!DOCTYPE html>
<html lang="bn">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>рж░ржоржЬрж╛ржи рзирзжрзирзм тАФ ржмрж╛ржВрж▓рж╛ржжрзЗрж╢</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Tiro+Bangla&family=Inter:wght@400;700;800&family=Playpen+Sans:wght@400;700&display=swap" rel="stylesheet">
<style>
  *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
  :root {
    --bg: #F0F9F4;
    --card-bg: #FFFFFF;
    --text-main: #1A2F23;
    --text-muted: #64748B;
    --accent-green: #10B981;
    --border: #E2E8F0;
    --sahur-grad: #DCFCE7;
    --iftar-grad: #E2F0D9;
    --status-bg: #064E3B;
  }
  body {
    font-family: 'Tiro Bangla', serif;
    background-color: var(--bg);
    color: var(--text-main);
    min-height: 100vh;
    padding-bottom: 20px;
    -webkit-font-smoothing: antialiased;
  }
  .en-font { font-family: 'Inter', sans-serif; letter-spacing: -0.02em; }
  .ar-font { font-family: 'Playpen Sans', cursive; direction: rtl; unicode-bidi: isolate; }
  
  #loader { position: fixed; inset: 0; background: var(--bg); display: flex; align-items: center; justify-content: center; z-index: 150; font-weight: bold; font-size: 1.2rem; }
  
  #splash { position: fixed; inset: 0; background: var(--bg); display: flex; align-items: center; justify-content: center; z-index: 100; padding: 20px; }
  .splash-card { background: var(--card-bg); border-radius: 28px; padding: 25px; width: 100%; max-width: 400px; box-shadow: 0 10px 30px rgba(0,0,0,0.03); text-align: center; }
  .zila-list { max-height: 300px; overflow-y: auto; border: 1px solid var(--border); border-radius: 12px; margin-top: 15px; text-align: left; }
  .zila-item { padding: 12px 15px; cursor: pointer; border-bottom: 1px solid #f9f9f9; }
  .zila-item:hover { background: var(--bg); color: var(--accent-green); }

  #app { display: none; max-width: 1100px; margin: 0 auto; padding: 20px; }

  .status-card {
    background: var(--status-bg);
    border-radius: 30px;
    padding: 30px;
    margin-bottom: 20px;
    color: white;
    box-shadow: 0 10px 30px rgba(6, 78, 59, 0.15);
  }
  
  .status-top {
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    margin-bottom: 25px;
    border-bottom: 1px solid rgba(255,255,255,0.1);
    padding-bottom: 20px;
  }
  
  .date-info .hijri { font-size: 22px; font-weight: 800; }
  .date-info .gregorian { font-size: 14px; opacity: 0.7; margin-top: 4px; }
  
  .city-box { text-align: right; cursor: pointer; }
  .city-box .city { font-size: 20px; font-weight: 800; }
  .city-box .change { color: #10B981; font-size: 12px; font-weight: 700; text-decoration: underline; margin-top: 2px; }

  .status-bottom {
    display: flex;
    justify-content: space-between;
    align-items: center;
  }
  
  .status-info { display: flex; align-items: center; gap: 15px; }
  .status-info svg { width: 28px; height: 28px; color: #10B981; }
  .status-text h2 { font-size: 22px; font-weight: 700; }
  .status-text p { font-size: 14px; opacity: 0.8; }
  
  .status-badge {
    background: rgba(255,255,255,0.1);
    padding: 12px 18px;
    border-radius: 20px;
    text-align: center;
    backdrop-filter: blur(10px);
    min-width: 90px;
  }
  .status-badge .num { font-size: 24px; font-weight: 800; display: block; color: #10B981; }
  .status-badge .label { font-size: 11px; opacity: 0.7; }

  .layout-grid { display: grid; grid-template-columns: 1fr; gap: 20px; }
  @media (min-width: 992px) { .layout-grid { grid-template-columns: 450px 1fr; align-items: start; } .sticky-col { position: sticky; top: 20px; } }

  .hero-container { display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-bottom: 15px; }
  .hero-card { border-radius: 30px; padding: 25px; height: 210px; display: flex; flex-direction: column; justify-content: space-between; border: 2px solid transparent; transition: border-color 0.3s ease; }
  .card-sahur { background: var(--sahur-grad); }
  .card-iftar { background: var(--iftar-grad); }
  .hero-card label { font-size: 15px; color: #334155; font-weight: 600; }
  .hero-card .event { font-size: 22px; font-weight: 800; margin-top: 4px; color: #064E3B; }
  .hero-card .time { font-size: 34px; font-weight: 800; font-family: 'Inter', sans-serif; color: #0F172A; margin: 10px 0; }
  .hero-card .sub { font-size: 14px; color: #475569; font-weight: 600; }

  .summary-bar { background: white; border-radius: 20px; padding: 20px; display: flex; justify-content: space-around; box-shadow: 0 4px 15px rgba(0,0,0,0.02); margin-bottom: 20px; }
  .summary-item { text-align: center; }
  .summary-label { font-size: 13px; color: var(--text-muted); font-weight: 700; margin-bottom: 5px; }
  .summary-time { font-size: 18px; font-weight: 800; font-family: 'Inter', sans-serif; color: #064E3B; }

  .toggle-container { display: flex; background: #E2E8F0; padding: 5px; border-radius: 15px; margin-bottom: 20px; gap: 5px; }
  .toggle-btn { flex: 1; border: none; padding: 12px; border-radius: 12px; font-family: 'Tiro Bangla', serif; font-size: 14px; font-weight: 700; cursor: pointer; background: transparent; color: #475569; transition: all 0.2s; }
  .toggle-btn.active { background: white; color: var(--accent-green); box-shadow: 0 2px 8px rgba(0,0,0,0.05); }

  .table-wrapper { background: white; border-radius: 25px; overflow: hidden; border: 1px solid var(--border); }
  table { width: 100%; border-collapse: collapse; font-size: 16px; }
  th { background: #F0FDF4; padding: 15px; text-align: left; color: #064E3B; }
  td { padding: 15px; border-bottom: 1px solid #F1F5F9; }
  tr.today-row { background: #F0FDF4; border-left: 6px solid var(--accent-green); }

  .dua-card { background: white; border-radius: 25px; padding: 25px; margin-bottom: 15px; border: 1px solid var(--border); }
  .dua-title { font-size: 18px; font-weight: 800; color: #065F46; margin-bottom: 15px; }

  .salat-list { display: flex; flex-direction: column; gap: 12px; }
  .salat-item { 
    display: flex; 
    align-items: center; 
    justify-content: space-between; 
    background: #F8FAFC; 
    padding: 18px 22px; 
    border-radius: 20px; 
    cursor: pointer;
    transition: all 0.2s;
    border: 1px solid transparent;
  }
  .salat-item:hover { background: #F1F5F9; }
  .salat-item.completed { background: #DCFCE7; border-color: #86EFAC; }
  .salat-name { font-size: 18px; font-weight: 700; color: #1E293B; }
  .salat-check { 
    width: 26px; 
    height: 26px; 
    border-radius: 8px; 
    border: 2px solid #CBD5E1; 
    display: flex; 
    align-items: center; 
    justify-content: center;
    background: white;
  }
  .completed .salat-check { background: #10B981; border-color: #10B981; }
  .salat-check svg { display: none; width: 16px; height: 16px; color: white; }
  .completed .salat-check svg { display: block; }

  .progress-container { background: #E2E8F0; border-radius: 10px; height: 10px; width: 100%; margin-bottom: 15px; overflow: hidden; }
  .progress-bar { background: #10B981; height: 100%; width: 0%; transition: width 0.4s ease; }
  .salat-reminder { background: #F0FDF4; color: #047857; padding: 12px; border-radius: 12px; font-size: 13px; font-weight: 700; margin-bottom: 15px; border: 1px solid #BBF7D0; text-align: center; }
  
  #reward-card {
    background: linear-gradient(135deg, #059669 0%, #064E3B 100%);
    color: white;
    display: none;
    padding: 25px;
    border-radius: 25px;
    text-align: center;
    margin-bottom: 15px;
    box-shadow: 0 10px 20px rgba(6, 78, 59, 0.2);
    animation: bounceIn 0.8s;
  }
  .reset-btn { background: rgba(255,255,255,0.2); border: 1px solid white; color: white; padding: 8px 15px; border-radius: 10px; font-size: 13px; font-weight: 700; cursor: pointer; margin-top: 15px; }
  .reset-btn:hover { background: white; color: #064E3B; }

  /* Update Modal Styles */
  .modal-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    backdrop-filter: blur(5px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 200;
    padding: 20px;
    opacity: 0;
    visibility: hidden;
    transition: all 0.3s ease;
  }
  .modal-overlay.active {
    opacity: 1;
    visibility: visible;
  }
  .modal-content {
    background: white;
    width: 100%;
    max-width: 450px;
    border-radius: 30px;
    padding: 35px;
    text-align: center;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
    transform: translateY(20px);
    transition: transform 0.3s ease;
  }
  .modal-overlay.active .modal-content {
    transform: translateY(0);
  }
  .modal-icon {
    width: 60px;
    height: 60px;
    background: #DCFCE7;
    color: #10B981;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    margin: 0 auto 20px;
  }
  .modal-title { font-size: 24px; font-weight: 800; color: #064E3B; margin-bottom: 15px; }
  .update-list { text-align: left; margin-bottom: 25px; color: #475569; font-size: 16px; line-height: 1.8; }
  .update-item { display: flex; gap: 10px; margin-bottom: 10px; }
  .update-item span { color: #10B981; font-weight: bold; }
  .btn-primary {
    background: #064E3B;
    color: white;
    border: none;
    padding: 14px 40px;
    border-radius: 15px;
    font-size: 16px;
    font-weight: 700;
    cursor: pointer;
    width: 100%;
    transition: background 0.2s;
  }
  .btn-primary:hover { background: #053b2d; }

  @keyframes bounceIn {
    0% { transform: scale(0.3); opacity: 0; }
    50% { transform: scale(1.05); opacity: 1; }
    70% { transform: scale(0.9); }
    100% { transform: scale(1); }
  }
  
  footer { text-align: center; padding: 30px; font-size: 14px; border-top: 1px solid var(--border); margin-top: 30px; color: #64748B; }
  footer a { color: var(--accent-green); text-decoration: none; font-weight: 800; }

  @media (max-width: 600px) {
    .status-card { padding: 20px; border-radius: 20px; }
    .hero-card { height: 190px; padding: 20px; border-radius: 20px; }
    .hero-card .time { font-size: 26px; }
    #app { padding: 10px; }
    .toggle-btn { font-size: 12px; padding: 10px 5px; }
    .modal-content { padding: 25px; }
  }
</style>
</head>
<body>

<div id="loader">рж▓рзЛржб рж╣ржЪрзНржЫрзЗ...</div>

<div id="splash" style="display:none;">
  <div class="splash-card">
    <h1 class="splash-title" style="color: #064E3B; margin-bottom: 15px;">рж░ржоржЬрж╛ржи ржХрзНржпрж╛рж▓рзЗржирзНржбрж╛рж░ рзирзжрзирзм</h1>
    <input type="text" id="zila-search" class="search-box" style="width:100%; padding:12px; border-radius:10px; border:1px solid #ddd;" placeholder="ржЖржкржирж╛рж░ ржЬрзЗрж▓рж╛ ржЦрзБржБржЬрзБржи...">
    <div id="zila-list" class="zila-list"></div>
  </div>
</div>

<div id="app">
  <div class="status-card">
    <div class="status-top">
      <div class="date-info">
        <div class="hijri" id="hijri-display">рзи Ramadan рззрзкрзкрзн AH</div>
        <div class="gregorian" id="gregorian-display">рзирзж ржлрзЗржмрзНрж░рзБрзЯрж╛рж░рж┐ рзирзжрзирзм</div>
      </div>
      <div class="city-box" id="change-city-btn">
        <div class="city" id="city-name">ржврж╛ржХрж╛</div>
        <div class="change">ржкрж░рж┐ржмрж░рзНрждржи ржХрж░рзБржи</div>
      </div>
    </div>
    
    <div class="status-bottom">
      <div class="status-info">
        <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.54 1.118l-3.976-2.888a1 1 0 00-1.175 0l-3.976 2.888c-.784.57-1.838-.196-1.539-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
        </svg>
        <div class="status-text">
          <h2 id="fast-status">рж░рзЛржЬрж╛ ржЪрж▓ржЫрзЗ</h2>
          <p id="fast-count">рж░рзЛржЬрж╛ рзи/рзйрзж</p>
        </div>
      </div>
      <div class="status-badge">
        <span class="num" id="fast-num">рзи</span>
        <span class="label">рж░ржоржЬрж╛ржирзЗрж░</span>
      </div>
    </div>
  </div>

  <div class="layout-grid">
    <div class="sticky-col">
      <div class="hero-container">
        <div class="hero-card card-sahur" id="card-timer">
          <div>
            <label>ржПржЦржи рж╕ржорзЯ</label>
            <div class="event" id="timer-label">рж╕рж╛рж╣рж░рж┐ ржмрж╛ржХрж┐</div>
          </div>
          <div class="time en-font" id="countdown-timer">рзжрзж:рзжрзж:рзжрзж</div>
          <div class="sub" id="duration-text">рж░рзЛржЬрж╛рж░ рж╕ржорзЯржХрж╛рж▓: рззрзи ржШржгрзНржЯрж╛ рзкрзм ржорж┐ржирж┐ржЯ</div>
        </div>
        <div class="hero-card card-iftar" id="card-next">
          <div>
            <label>ржкрж░ржмрж░рзНрждрзА ржЗржнрзЗржирзНржЯ</label>
            <div class="event" id="next-event-label">ржЗржлрждрж╛рж░ рж╢рзБрж░рзБ</div>
          </div>
          <div class="time en-font" id="next-event-time">рзл:рзлрзл рж╕ржирзНржзрзНржпрж╛</div>
          <div class="sub" id="sunset-text">рж╕рзВрж░рзНржпрж╛рж╕рзНржд: рзл:рзлрзл</div>
        </div>
      </div>

      <div class="summary-bar">
        <div class="summary-item">
          <div class="summary-label">рж╕рж╛рж╣рж░рж┐ рж╢рзЗрж╖</div>
          <div class="summary-time en-font" id="summ-sahur">--:--</div>
        </div>
        <div class="summary-item">
          <div class="summary-label">ржЗржлрждрж╛рж░ рж╢рзБрж░рзБ</div>
          <div class="summary-time en-font" id="summ-iftar">--:--</div>
        </div>
      </div>
      
      <div class="dua-card">
        <div class="dua-title">ЁЯУЦ ржЖржЬржХрзЗрж░ рж╣рж╛ржжрж┐рж╕</div>
        <div class="hadith-ar ar-font" id="hadith-ar" style="font-size:1.1rem; text-align:right; margin-bottom:10px; color: #064E3B;"></div>
        <div class="hadith-bn" id="hadith-bn" style="font-style:italic; font-size:16px; color: #334155;"></div>
      </div>
    </div>

    <div>
      <div class="toggle-container">
        <button class="toggle-btn active" id="tab-hadith">ржжрзЛрзЯрж╛ ржУ ржирж┐рзЯржд</button>
        <button class="toggle-btn" id="tab-salat">рж╕рж╛рж▓рж╛ржд ржЯрзНрж░рзНржпрж╛ржХрж╛рж░</button>
        <button class="toggle-btn" id="tab-schedule">ржкрзВрж░рзНржг рж╕рзВржЪрзА</button>
      </div>

      <div id="view-hadith">
        <div class="dua-card">
          <div class="dua-title">ЁЯМЩ рж╕рж╛рж╣рж░рж┐рж░ ржирж┐рзЯржд</div>
          <div class="dua-arabic ar-font" style="text-align: right; line-height: 1.8; margin-bottom: 10px; font-size: 1.2rem; color: #064E3B;">┘Ж┘О┘И┘О┘К┘Т╪к┘П ╪г┘О┘Ж┘Т ╪г┘О╪╡┘П┘И┘Е┘О ╪║┘О╪п┘Л╪з ┘Е┘Р┘Ж┘Т ╪┤┘О┘З┘Т╪▒┘Р ╪▒┘О┘Е┘О╪╢┘О╪з┘Ж┘О ╪з┘Д┘Т┘Е┘П╪и┘О╪з╪▒┘ОржХ┘Р ┘Б┘О╪▒┘Т╪╢┘Л╪з ┘Д┘О┘Г┘О ┘К┘О╪з ╪з┘Д┘Д┘З┘П ┘Б┘О╪к┘О┘В┘О╪и┘С┘О┘Д┘Т ┘Е┘Р┘Ж┘Р┘С┘К ╪е┘Р┘Ж┘С┘О┘Г┘О ╪г┘О┘Ж┘Т╪к┘О ╪з┘Д╪│┘С┘О┘Е┘Р█М╪╣┘П ╪з┘Д┘Т╪╣┘О┘Д┘Р┘К┘Т┘Е┘П</div>
          <div class="dua-text"><strong>ржЙржЪрзНржЪрж╛рж░ржг:</strong> ржирж╛ржУржпрж╝рж╛ржЗрждрзБ ржЖржи ржЖржЫрзБржорж╛ ржЧрж╛ржжрж╛ржо ржорж┐ржи рж╢рж╛рж╣рж░рж┐ рж░рж╛ржорж╛ржжрзНржмрж╛ржирж╛рж▓ ржорзБржмрж╛рж░рж╛ржХрж┐ ржлрж╛рж░ржжрзНржмрж╛рж▓рзНрж▓рж╛ржХрж╛ ржЗржпрж╝рж╛ ржЖрж▓рзНрж▓рж╛рж╣рзБ ржлрж╛рждрж╛ржХрзНржмрж╛ржмрзНржмрж╛рж▓ ржорж┐ржирзНржирзА ржЗржирзНржирж╛ржХрж╛ ржЖржирзНрждрж╛рж╕ рж╕рж╛ржорзАржЙрж▓ ржЖрж▓рзАржоред</div>
        </div>
        <div class="dua-card">
          <div class="dua-title">ЁЯд▓ ржЗржлрждрж╛рж░рзЗрж░ ржжрзБ'ржЖ</div>
          <div class="dua-arabic ar-font" style="text-align: right; line-height: 1.8; margin-bottom: 10px; font-size: 1.2rem; color: #064E3B;">╪з┘Д┘Д┘С┘О┘З┘П┘Е┘С┘О ┘Д┘О┘Г┘О ╪╡┘П┘Е┘Т╪к┘П ┘И┘О╪╣┘О┘Д┘О┘Й ╪▒┘Р╪▓┘Т┘В┘Р┘Г┘О ╪г┘О┘Б┘Т╪╖┘О╪▒┘Т╪к┘П</div>
          <div class="dua-text"><strong>ржЙржЪрзНржЪрж╛рж░ржг:</strong> ржЖрж▓рзНрж▓рж╛рж╣рзБржорзНржорж╛ рж▓рж╛ржХрж╛ ржЫрзБржорждрзБ ржУрзЯрж╛ ржЖрж▓рж╛ рж░рж┐ржпржХрзНржмрж┐ржХрж╛ ржЖржлрждрж╛рж░рждрзБред</div>
        </div>
      </div>

      <div id="view-salat" style="display: none;">
        <div id="reward-card">
          <h2 style="font-size: 24px;">ржорж╛рж╢рж╛ржЖрж▓рзНрж▓рж╛рж╣! ЁЯОЙ</h2>
          <p style="margin-top: 10px; font-size: 16px;">ржЖржкржирж┐ ржЖржЬржХрзЗрж░ рзл ржУржпрж╝рж╛ржХрзНржд ржирж╛ржорж╛ржЬ рж╕ржорзНржкржирзНржи ржХрж░рзЗржЫрзЗржиред</p>
          <button class="reset-btn" onclick="resetTodaySalat()">рж░рж┐рж╕рзЗржЯ ржХрж░рзБржи</button>
        </div>

        <div class="dua-card">
          <div class="dua-title">ЁЯХЛ рзл ржУржпрж╝рж╛ржХрзНржд ржирж╛ржорж╛ржЬ ржЯрзНрж░рзНржпрж╛ржХрж╛рж░</div>
          <div class="progress-container"><div class="progress-bar" id="salat-progress"></div></div>
          <div class="salat-reminder">тЪая╕П рж╕рждрж░рзНржХрждрж╛: ржирж╛ржорж╛ржЬ ржирж╛ ржкрзЬрзЗ ржЯрж┐ржХ ржжрзЗржмрзЗржи ржирж╛ред ржЖрж▓рзНрж▓рж╛рж╣ рж╕ржм ржжрзЗржЦржЫрзЗржиред</div>

          <div class="salat-list" id="salat-tracker-list">
            <div class="salat-item" onclick="toggleSalat('fajr')">
              <span class="salat-name">ржлржЬрж░</span>
              <div class="salat-check" id="check-fajr"><svg viewBox="0 0 20 20" fill="currentColor"><path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg></div>
            </div>
            <div class="salat-item" onclick="toggleSalat('dhuhr')">
              <span class="salat-name">ржпрзЛрж╣рж░</span>
              <div class="salat-check" id="check-dhuhr"><svg viewBox="0 0 20 20" fill="currentColor"><path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg></div>
            </div>
            <div class="salat-item" onclick="toggleSalat('asr')">
              <span class="salat-name">ржЖрж╕рж░</span>
              <div class="salat-check" id="check-asr"><svg viewBox="0 0 20 20" fill="currentColor"><path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg></div>
            </div>
            <div class="salat-item" onclick="toggleSalat('maghrib')">
              <span class="salat-name">ржорж╛ржЧрж░рж┐ржм</span>
              <div class="salat-check" id="check-maghrib"><svg viewBox="0 0 20 20" fill="currentColor"><path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg></div>
            </div>
            <div class="salat-item" onclick="toggleSalat('isha')">
              <span class="salat-name">ржПрж╢рж╛ ржУ рждрж╛рж░рж╛ржмрж┐</span>
              <div class="salat-check" id="check-isha"><svg viewBox="0 0 20 20" fill="currentColor"><path d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z"/></svg></div>
            </div>
          </div>
        </div>
      </div>

      <div id="view-schedule" style="display: none;">
        <div class="table-wrapper" id="table-container"></div>
      </div>
    </div>
  </div>

  <!-- Update Modal -->
  <div class="modal-overlay" id="update-modal">
    <div class="modal-content">
      <div class="modal-icon">
        <svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="m12 14 4-4"/><path d="M3.34 19a10 10 0 1 1 17.32 0"/></svg>
      </div>
      <h2 class="modal-title">ржирждрзБржи ржХрж┐ ржЖржЫрзЗ?</h2>
      <div class="update-list">
        <div class="update-item"><span>тЬУ</span> рзл ржУржпрж╝рж╛ржХрзНржд ржирж╛ржорж╛ржЬ ржЯрзНрж░рзНржпрж╛ржХрж╛рж░ ржпрзЛржЧ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред</div>
        <div class="update-item"><span>тЬУ</span> рззрзжрзж% ржирж╛ржорж╛ржЬ ржкрзВрж░рзНржг ржХрж░рж▓рзЗ рж░рж┐ржУржпрж╝рж╛рж░рзНржб рж╕рж┐рж╕рзНржЯрзЗржоред</div>
        <div class="update-item"><span>тЬУ</span> рж╕ржорзНржкрзВрж░рзНржг ржирждрзБржи ржПржмржВ ржЖржзрзБржирж┐ржХ ржЧрзНрж░рж┐ржи ржерж┐ржоред</div>
        <div class="update-item"><span>тЬУ</span> ржбрзЗрж╕рзНржХржЯржк ржПржмржВ ржорзЛржмрж╛ржЗрж▓ рж░рзЗрж╕ржкржирзНрж╕рж┐ржн ржбрж┐ржЬрж╛ржЗржиред</div>
      </div>
      <button class="btn-primary" onclick="closeUpdateModal()">ржмрзБржЭрзЗржЫрж┐</button>
    </div>
  </div>

  <footer>Vibecoded by <a href="https://www.facebook.com/iamshakibali/" target="_blank">Shakib</a> &copy; 2026</footer>
</div>

<script>
const districts = [{name:"ржврж╛ржХрж╛",en:"Dhaka",lat:23.8103,lon:90.4125},{name:"ржЧрж╛ржЬрзАржкрзБрж░",en:"Gazipur",lat:23.9999,lon:90.4200},{name:"ржирж╛рж░рж╛рзЯржгржЧржЮрзНржЬ",en:"Narayanganj",lat:23.6238,lon:90.5000},{name:"ржирж░рж╕рж┐ржВржжрзА",en:"Narsingdi",lat:23.9229,lon:90.7177},{name:"ржорзБржирзНрж╕рзАржЧржЮрзНржЬ",en:"Munshiganj",lat:23.6061,lon:90.4996},{name:"ржорж╛ржирж┐ржХржЧржЮрзНржЬ",en:"Manikganj",lat:23.8644,lon:90.0047},{name:"ржлрж░рж┐ржжржкрзБрж░",en:"Faridpur",lat:23.6071,lon:89.8429},{name:"рж░рж╛ржЬржмрж╛рзЬрзА",en:"Rajbari",lat:23.5089,lon:89.7884},{name:"ржЧрзЛржкрж╛рж▓ржЧржЮрзНржЬ",en:"Gopalganj",lat:23.2106,lon:89.8517},{name:"ржорж╛ржжрж╛рж░рзАржкрзБрж░",en:"Madaripur",lat:23.1676,lon:90.2103},{name:"рж╢рж░рзАржпрж╝рждржкрзБрж░",en:"Shariatpur",lat:23.2160,lon:90.3486},{name:"ржЯрж╛ржЩрзНржЧрж╛ржЗрж▓",en:"Tangail",lat:24.2513,lon:89.9167},{name:"ржХрж┐рж╢рзЛрж░ржЧржЮрзНржЬ",en:"Kishoreganj",lat:24.4331,lon:90.7866},{name:"ржЪржЯрзНржЯржЧрзНрж░рж╛ржо",en:"Chittagong",lat:22.3569,lon:91.7832},{name:"ржХржХрзНрж╕ржмрж╛ржЬрж╛рж░",en:"Cox's Bazar",lat:21.4272,lon:92.0058},{name:"ржХрзБржорж┐рж▓рзНрж▓рж╛",en:"Comilla",lat:23.4607,lon:91.1809},{name:"ржмрзНрж░рж╛рж╣рзНржоржгржмрж╛ржбрж╝рж┐ржпрж╝рж╛",en:"Brahmanbaria",lat:23.9571,lon:91.1167},{name:"ржирзЛржпрж╝рж╛ржЦрж╛рж▓рзА",en:"Noakhali",lat:22.1600,lon:91.1333},{name:"ржЪрж╛ржБржжржкрзБрж░",en:"Chandpur",lat:23.2321,lon:90.6631},{name:"ржлрзЗржирзА",en:"Feni",lat:22.8300,lon:91.1000},{name:"рж▓ржХрзНрж╖рзНржорзАржкрзБрж░",en:"Lakshmipur",lat:22.9447,lon:90.8282},{name:"ржЦрж╛ржЧржбрж╝рж╛ржЫржбрж╝рж┐",en:"Khagrachhari",lat:23.1073,lon:91.9363},{name:"рж░рж╛ржЩрж╛ржорж╛ржЯрж┐",en:"Rangamati",lat:22.6574,lon:92.1731},{name:"ржмрж╛ржирзНржжрж░ржмрж╛ржи",en:"Bandarban",lat:22.1953,lon:92.2184},{name:"рж░рж╛ржЬрж╢рж╛рж╣рзА",en:"Rajshahi",lat:24.3636,lon:88.6241},{name:"ржмржЧрзБржбрж╝рж╛",en:"Bogra",lat:24.8481,lon:89.3730},{name:"ржирж╛ржЯрзЛрж░",en:"Natore",lat:24.3635,lon:88.9849},{name:"ржЪрж╛ржБржкрж╛ржЗржиржмрж╛ржмржЧржЮрзНржЬ",en:"Chapai Nawabganj",lat:24.5884,lon:88.8715},{name:"ржиржУржЧрж╛ржБ",en:"Naogaon",lat:24.8912,lon:88.9515},{name:"рж╕рж┐рж░рж╛ржЬржЧржЮрзНржЬ",en:"Sirajganj",lat:24.0000,lon:89.2500},{name:"ржкрж╛ржмржирж╛",en:"Pabna",lat:24.0158,lon:89.2335},{name:"ржЬржпрж╝ржкрзБрж░рж╣рж╛ржЯ",en:"Joypurhat",lat:25.1011,lon:89.0225},{name:"ржЦрзБрж▓ржирж╛",en:"Khulna",lat:22.8456,lon:89.5403},{name:"ржпрж╢рзЛрж░",en:"Jessore",lat:23.1664,lon:89.2137},{name:"рж╕рж╛рждржХрзНрж╖рзАрж░рж╛",en:"Satkhira",lat:22.7185,lon:89.0705},{name:"ржмрж╛ржЧрзЗрж░рж╣рж╛ржЯ",en:"Bagerhat",lat:22.6516,lon:89.7859},{name:"ржорж╛ржЧрзБрж░рж╛",en:"Magura",lat:23.5424,lon:89.1726},{name:"ржЭрж┐ржирж╛ржЗржжрж╣",en:"Jhenaidah",lat:23.5450,lon:89.1536},{name:"ржирзЬрж╛ржЗрж▓",en:"Narail",lat:23.1683,lon:89.4908},{name:"ржХрзБрж╖рзНржЯрж┐ржпрж╝рж╛",en:"Kushtia",lat:23.9010,lon:89.1204},{name:"ржЪрзБржпрж╝рж╛ржбрж╛ржЩрзНржЧрж╛",en:"Chuadanga",lat:23.6336,lon:88.8477},{name:"ржорзЗрж╣рзЗрж░ржкрзБрж░",en:"Meherpur",lat:23.7621,lon:88.6318},{name:"рж╕рж┐рж▓рзЗржЯ",en:"Sylhet",lat:24.8949,lon:91.8687},{name:"рж╕рзБржирж╛ржоржЧржЮрзНржЬ",en:"Sunamganj",lat:25.0662,lon:91.3992},{name:"ржорзМрж▓ржнрзАржмрж╛ржЬрж╛рж░",en:"Moulvibazar",lat:24.4252,lon:91.7637},{name:"рж╣ржмрж┐ржЧржЮрзНржЬ",en:"Habiganj",lat:24.3745,lon:91.4126},{name:"ржмрж░рж┐рж╢рж╛рж▓",en:"Barisal",lat:22.7010,lon:90.3535},{name:"ржнрзЛрж▓рж╛",en:"Bhola",lat:22.3303,lon:90.3347},{name:"ржкржЯрзБржпрж╝рж╛ржЦрж╛рж▓рзА",en:"Patuakhali",lat:22.3596,lon:90.2158},{name:"ржмрж░ржЧрзБржирж╛",en:"Barguna",lat:22.1285,lon:90.1219},{name:"ржкрж┐рж░рзЛржЬржкрзБрж░",en:"Pirojpur",lat:22.5781,lon:89.9708},{name:"ржЭрж╛рж▓ржХрж╛ржарж┐",en:"Jhalokati",lat:22.6406,lon:90.1989},{name:"рж░ржВржкрзБрж░",en:"Rangpur",lat:25.7439,lon:89.2752},{name:"ржжрж┐ржирж╛ржЬржкрзБрж░",en:"Dinajpur",lat:25.7200,lon:88.5950},{name:"ржХрзБржбрж╝рж┐ржЧрзНрж░рж╛ржо",en:"Kurigram",lat:25.8054,lon:89.6361},{name:"рж▓рж╛рж▓ржоржирж┐рж░рж╣рж╛ржЯ",en:"Lalmonirhat",lat:25.9298,lon:89.4404},{name:"ржирзАрж▓ржлрж╛ржорж╛рж░рзА",en:"Nilphamari",lat:25.9317,lon:88.8549},{name:"ржЧрж╛ржЗржмрж╛ржирзНржзрж╛",en:"Gaibandha",lat:25.3287,lon:89.5426},{name:"ржкржЮрзНржЪржЧржбрж╝",en:"Panchagarh",lat:26.3353,lon:88.5516},{name:"ржарж╛ржХрзБрж░ржЧрж╛ржБржУ",en:"Thakurgaon",lat:26.0336,lon:88.4616},{name:"ржоржпрж╝ржоржирж╕рж┐ржВрж╣",en:"Mymensingh",lat:24.7471,lon:90.4203},{name:"ржЬрж╛ржорж╛рж▓ржкрзБрж░",en:"Jamalpur",lat:24.8837,lon:90.0002},{name:"ржирзЗрждрзНрж░ржХрзЛржирж╛",en:"Netrokona",lat:24.8700,lon:90.7275},{name:"рж╢рзЗрж░ржкрзБрж░",en:"Sherpur",lat:25.0194,lon:90.0153}];

const hadiths = [
  {ar:"┘Е┘О┘Ж┘Т ╪╡┘О╪з┘Е┘О ╪▒┘О┘Е┘О╪╢┘О╪з┘Ж┘О ╪е┘Р┘К┘Е┘О╪з┘Ж┘Л╪з ┘И┘О╪з╪н┘Т╪к┘Р╪│┘О╪з╪и┘Л╪з ╪║┘П┘Б┘Р╪▒┘О ┘Д┘О┘З┘П ┘Е┘О╪з ╪к┘О┘В┘О╪п┘О┘Сржо┘О ┘Е┘Р┘Ж┘Т ╪░┘О┘Ж┘Т╪и┘Р┘З┘Р",bn:"ржпрзЗ ржмрзНржпржХрзНрждрж┐ ржИржорж╛ржи ржУ рж╕ржУржпрж╝рж╛ржмрзЗрж░ ржЖрж╢рж╛ржпрж╝ рж░ржоржЬрж╛ржирзЗрж░ рж░рзЛржЬрж╛ рж░рж╛ржЦржмрзЗ, рждрж╛рж░ ржЕрждрзАрждрзЗрж░ рж╕ржм ржЧрзБржирж╛рж╣ ржХрзНрж╖ржорж╛ ржХрж░рзЗ ржжрзЗржУржпрж╝рж╛ рж╣ржмрзЗред (рж╕рж╣рзАрж╣ ржмрзБржЦрж╛рж░рзА)"},
  {ar:"┘Г┘П┘Д┘П┘С ╪╣┘О┘Е┘О┘Д┘Р ╪з╪и┘Т┘Ж┘Р ╪в╪п┘О┘Е┘О ┘Д┘О┘З┘П ╪е┘Р┘Д┘О┘С╪з ╪з┘Д╪╡┘Р┘С┘К┘О╪з┘Е┘О ┘Б┘О╪е┘Р┘Ж┘О┘С┘З┘П ┘Д┘Р┘К ┘И┘О╪г┘О┘Ж┘О╪з ╪г┘О╪м┘Т╪м┘Р┘К ╪и┘Р┘З┘Р",bn:"ржкрзНрж░рждрж┐ржЯрж┐ ржирзЗржХ ржЖржорж▓рзЗрж░ рж╕ржУржпрж╝рж╛ржм рззрзж ржерзЗржХрзЗ рзнрзжрзж ржЧрзБржг ржкрж░рзНржпржирзНржд ржмрзГржжрзНржзрж┐ ржХрж░рж╛ рж╣ржпрж╝ред ржХрж┐ржирзНрждрзБ рж░рзЛржЬрж╛рж░ ржмрзНржпрж╛ржкрж╛рж░рзЗ ржЖрж▓рзНрж▓рж╛рж╣ ржмрж▓рзЗржи, рж░рзЛржЬрж╛ ржЖржорж╛рж░ржЗ ржЬржирзНржп ржПржмржВ ржЖржорж┐ ржирж┐ржЬрзЗржЗ ржПрж░ ржкрзНрж░рждрж┐ржжрж╛ржи ржжрзЗржмред (рж╕рж╣рзАрж╣ ржорзБрж╕рж▓рж┐ржо)"},
  {ar:"┘Д┘О╪о┘П┘Д┘П┘И┘Б┘П ┘Б┘О┘Е┘Р ╪з┘Д╪╡┘О┘С╪з╪ж┘Р┘Е┘Р ╪г┘О╪╖┘Т┘К┘О╪и┘П ╪╣┘Р┘Ж┘Т╪п┘О ╪з┘Д┘Д┘С┘О┘З┘Р ┘Е┘Р┘Ж┘Т ╪▒┘Р┘К╪н┘Р ╪з┘Д┘Т┘Е┘Р╪│┘Т┘Г┘Р",bn:"рж░рзЛржЬрж╛ржжрж╛рж░рзЗрж░ ржорзБржЦрзЗрж░ ржШрзНрж░рж╛ржг ржЖрж▓рзНрж▓рж╛рж╣рж░ ржХрж╛ржЫрзЗ ржорж┐рж╢ржХрзЗрж░ рж╕рзБржЧржирзНржзрж┐рж░ ржЪрзЗржпрж╝рзЗржУ ржмрзЗрж╢рж┐ ржкрзНрж░рж┐ржпрж╝ред (рж╕рж╣рзАрж╣ ржмрзБржЦрж╛рж░рзА)"}
];

let fastingData = [], countdownInterval = null;

const toBn = s => s.toString().replace(/[0-9]/g, w => ({'0':'рзж','1':'рзз','2':'рзи','3':'рзй','4':'рзк','5':'рзл','6':'рзм','7':'рзн','8':'рзо','9':'рзп'})[w]);
const translateTime = t => toBn(t.replace('AM','ржнрзЛрж░').replace('PM','рж╕ржирзНржзрзНржпрж╛'));
const getFormattedDate = (offset = 0) => {
  const d = new Date(); d.setDate(d.getDate() - offset);
  return `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}-${String(d.getDate()).padStart(2,'0')}`;
};

const parseTime = (timeStr, dateStr) => {
  const [time, period] = timeStr.split(' ');
  let [hours, minutes] = time.split(':').map(Number);
  if (period === 'PM' && hours !== 12) hours += 12;
  if (period === 'AM' && hours === 12) hours = 0;
  const d = new Date(dateStr); d.setHours(hours, minutes, 0, 0); return d;
};

const renderZila = f => {
  const el = document.getElementById('zila-list'); el.innerHTML = "";
  districts.filter(d => d.name.includes(f)||d.en.toLowerCase().includes(f.toLowerCase()))
    .forEach(z => {
      const dv = document.createElement('div'); dv.className="zila-item"; dv.textContent=z.name;
      dv.onclick = () => {localStorage.setItem('selected_zila', JSON.stringify(z)); startApp(z);}; el.appendChild(dv);
    });
};

async function startApp(zila) {
  document.getElementById('loader').style.display = 'flex';
  try {
    const res = await fetch(`https://islamicapi.com/api/v1/ramadan/?lat=${zila.lat}&lon=${zila.lon}&api_key=rH5NxFBCblP5kc8zJjgB6VcQzfrf6tI0GIch2HoBkiNZFQZs&method=1&school=2&format=12`);
    const json = await res.json(); fastingData = json.data.fasting;
    const todayStr = getFormattedDate(0), todayIdx = fastingData.findIndex(r => r.date === todayStr);
    const todayRow = todayIdx !== -1 ? fastingData[todayIdx] : fastingData[0];
    
    document.getElementById('city-name').textContent = zila.name;
    const now = new Date();
    document.getElementById('gregorian-display').textContent = toBn(`${now.getDate()} ${['ржЬрж╛ржирзБрзЯрж╛рж░рж┐','ржлрзЗржмрзНрж░рзБрзЯрж╛рж░рж┐','ржорж╛рж░рзНржЪ','ржПржкрзНрж░рж┐рж▓','ржорзЗ','ржЬрзБржи','ржЬрзБрж▓рж╛ржЗ','ржЖржЧрж╕рзНржЯ','рж╕рзЗржкрзНржЯрзЗржорзНржмрж░','ржЕржХрзНржЯрзЛржмрж░','ржиржнрзЗржорзНржмрж░','ржбрж┐рж╕рзЗржорзНржмрж░'][now.getMonth()]} ${now.getFullYear()}`);
    
    const ramDay = todayIdx !== -1 ? todayIdx + 1 : 1;
    document.getElementById('hijri-display').textContent = todayRow.hijri_readable.replace(/[0-9]/g, w => toBn(w));
    document.getElementById('fast-count').textContent = `рж░рзЛржЬрж╛ ${toBn(ramDay)}/рзйрзж`;
    document.getElementById('fast-num').textContent = toBn(ramDay);

    updateUI(todayRow); renderSchedule(fastingData); setRandomHadith(); loadSalatState();
    document.getElementById('splash').style.display = 'none'; document.getElementById('app').style.display = 'block';
    startCountdown(todayRow);

    // Show update modal if not dismissed
    if (!localStorage.getItem('update_modal_dismissed')) {
      document.getElementById('update-modal').classList.add('active');
    }
  } catch (e) { console.error(e); } finally { document.getElementById('loader').style.display = 'none'; }
}

function closeUpdateModal() {
  document.getElementById('update-modal').classList.remove('active');
  localStorage.setItem('update_modal_dismissed', 'true');
}

function updateUI(row) {
  document.getElementById('summ-sahur').textContent = translateTime(row.time.sahur);
  document.getElementById('summ-iftar').textContent = translateTime(row.time.iftar);
  document.getElementById('duration-text').textContent = `рж░рзЛржЬрж╛рж░ рж╕ржорзЯржХрж╛рж▓: ${toBn(row.time.duration.replace('hours','ржШржгрзНржЯрж╛').replace('minutes','ржорж┐ржирж┐ржЯ'))}`;
}

function renderSchedule(data) {
  let html = `<table><thead><tr><th>рж░рзЛржЬрж╛</th><th>рждрж╛рж░рж┐ржЦ</th><th>рж╕рж╛рж╣рж░рж┐</th><th>ржЗржлрждрж╛рж░</th></tr></thead><tbody>`;
  const today = getFormattedDate(0);
  data.forEach((r, i) => {
    const isToday = r.date === today, d = new Date(r.date);
    html += `<tr class="${isToday?'today-row':''}"><td>${toBn(i+1)}</td><td>${toBn(d.getDate())} ${['ржЬрж╛ржирзБ','ржлрзЗржмрзНрж░рзБ','ржорж╛рж░рзНржЪ','ржПржкрзНрж░рж┐рж▓','ржорзЗ','ржЬрзБржи','ржЬрзБрж▓рж╛ржЗ','ржЖржЧрж╕рзНржЯ','рж╕рзЗржкрзНржЯрзЗ','ржЕржХрзНржЯрзЛ','ржиржнрзЗ','ржбрж┐рж╕рзЗ'][d.getMonth()]}</td><td>${translateTime(r.time.sahur)}</td><td>${translateTime(r.time.iftar)}</td></tr>`;
  });
  document.getElementById('table-container').innerHTML = html + '</tbody></table>';
}

function setRandomHadith() {
  const h = hadiths[Math.floor(Math.random()*hadiths.length)];
  document.getElementById('hadith-ar').textContent = h.ar; document.getElementById('hadith-bn').textContent = h.bn;
}

function toggleSalat(id) {
  const key = `salat_${getFormattedDate(0)}`;
  let s = JSON.parse(localStorage.getItem(key)) || {};
  s[id] = !s[id]; localStorage.setItem(key, JSON.stringify(s));
  loadSalatState();
}

function resetTodaySalat() {
  localStorage.removeItem(`salat_${getFormattedDate(0)}`);
  loadSalatState();
}

function loadSalatState() {
  const ids = ['fajr', 'dhuhr', 'asr', 'maghrib', 'isha'];
  const todayKey = `salat_${getFormattedDate(0)}`;
  const todayState = JSON.parse(localStorage.getItem(todayKey)) || {};
  let count = 0;
  ids.forEach(id => {
    const el = document.getElementById(`check-${id}`).parentElement;
    if (todayState[id]) { el.classList.add('completed'); count++; } else el.classList.remove('completed');
  });
  
  document.getElementById('salat-progress').style.width = (count / 5) * 100 + '%';
  document.getElementById('reward-card').style.display = count === 5 ? 'block' : 'none';
}

function startCountdown(row) {
  if (countdownInterval) clearInterval(countdownInterval);
  const update = () => {
    const now = new Date(), st = parseTime(row.time.sahur, row.date), it = parseTime(row.time.iftar, row.date);
    let target, label, nLabel, nTime, nSub;
    const cardT = document.getElementById('card-timer'), cardN = document.getElementById('card-next');

    if (now < st) {
      target = st; label = 'рж╕рж╛рж╣рж░рж┐ ржмрж╛ржХрж┐'; nLabel = 'рж╕рж╛рж╣рж░рж┐ рж╢рзЗрж╖'; nTime = row.time.sahur; nSub = `ржлржЬрж░ рж╢рзБрж░рзБ: ${toBn(row.time.sahur.split(' ')[0])}`;
      cardT.style.borderColor = "var(--accent-green)"; cardN.style.borderColor = "transparent";
    } else if (now < it) {
      target = it; label = 'ржЗржлрждрж╛рж░ ржмрж╛ржХрж┐'; nLabel = 'ржЗржлрждрж╛рж░ рж╢рзБрж░рзБ'; nTime = row.time.iftar; nSub = `рж╕рзВрж░рзНржпрж╛рж╕рзНржд: ${toBn(row.time.iftar.split(' ')[0])}`;
      cardT.style.borderColor = "transparent"; cardN.style.borderColor = "#064E3B";
    } else {
      const tomorrow = fastingData.find(r => r.date > row.date);
      if (tomorrow) {
        target = parseTime(tomorrow.time.sahur, tomorrow.date); label = 'рж╕рж╛рж╣рж░рж┐ ржмрж╛ржХрж┐'; nLabel = 'рж╕рж╛рж╣рж░рж┐ рж╢рзЗрж╖'; nTime = tomorrow.time.sahur; nSub = `ржлржЬрж░ рж╢рзБрж░рзБ: ${toBn(tomorrow.time.sahur.split(' ')[0])}`;
        cardT.style.borderColor = "var(--accent-green)"; cardN.style.borderColor = "transparent";
      } else { document.getElementById('timer-label').textContent = "ржЗржлрждрж╛рж░ рж╣рзЯрзЗржЫрзЗ"; return; }
    }

    const diff = target - now, h = Math.floor(diff/3600000), m = Math.floor((diff%3600000)/60000), s = Math.floor((diff%60000)/1000);
    document.getElementById('timer-label').textContent = label;
    document.getElementById('countdown-timer').textContent = toBn(`${String(h).padStart(2,'0')}:${String(m).padStart(2,'0')}:${String(s).padStart(2,'0')}`);
    document.getElementById('next-event-label').textContent = nLabel;
    document.getElementById('next-event-time').textContent = translateTime(nTime);
    document.getElementById('sunset-text').textContent = nSub;
  };
  update(); countdownInterval = setInterval(update, 1000);
}

window.onload = () => {
  const s = localStorage.getItem('selected_zila');
  if(s) startApp(JSON.parse(s)); else { document.getElementById('loader').style.display='none'; document.getElementById('splash').style.display='flex'; renderZila(""); }
};
document.getElementById('zila-search').oninput = e => renderZila(e.target.value);
document.getElementById('change-city-btn').onclick = () => { document.getElementById('app').style.display='none'; document.getElementById('splash').style.display='flex'; renderZila(""); };
document.getElementById('tab-hadith').onclick = () => switchV('view-hadith', 'tab-hadith');
document.getElementById('tab-salat').onclick = () => switchV('view-salat', 'tab-salat');
document.getElementById('tab-schedule').onclick = () => switchV('view-schedule', 'tab-schedule');

function switchV(vId, tId) {
  ['view-hadith', 'view-salat', 'view-schedule'].forEach(v => document.getElementById(v).style.display = v===vId?'block':'none');
  ['tab-hadith', 'tab-salat', 'tab-schedule'].forEach(t => document.getElementById(t).classList.toggle('active', t===tId));
}
</script>
</body>
</html>